<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆå§‹ç•Œé¢</title>
    <style>
        body {
            overflow: hidden;
            margin: 0;
        }
        .btn {
            width: 8em;
            height: 3em;
            margin: 0.5em;
            background: black;
            color: white;
            border:2px solid white;
            border-radius: 0.625em;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            position: relative;
            z-index: 1;
            overflow: hidden;
        }

        button:hover {
            color: black;
        }

        button:after {
            content: "";
            background: white;
            position: absolute;
            z-index: -1;
            left: -20%;
            right: -20%;
            top: 0;
            bottom: 0;
            transform: skewX(-45deg) scale(0, 1);
            transition: all 0.5s;
        }

        button:hover:after {
            transform: skewX(-45deg) scale(1, 1);
            -webkit-transition: all 0.5s;
            transition: all 0.5s;
        }
        .background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* ç¡®ä¿èƒŒæ™¯åœ¨å…¶ä»–å†…å®¹ä¹‹å */
        }
        .content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: white; /* è°ƒæ•´æ–‡æœ¬é¢œè‰² */
        }


        .text {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: grid;
            place-items: center;
            transform-origin: -100%;
            transform: scale(1);
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        }
        .tooltip-container {
            --background: #333333;
            --color: #e8e8e8;
            position: fixed; /* å°†ä½ç½®è®¾ç½®ä¸ºå›ºå®š */
            bottom: 20px; /* è·ç¦»åº•éƒ¨çš„è·ç¦» */
            right: 20px; /* è·ç¦»å³ä¾§çš„è·ç¦» */
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            font-size: 18px;
            font-weight: 600;
            color: var(--color);
            padding: 0.7em 1.8em;
            border-radius: 8px;
            text-transform: uppercase;
            height: 40px;
            width: 150px;
            display: grid;
            place-items: center;
            border: 2px solid var(--color);
        }

            .tooltip-container span:last-child {
                position: absolute;
                top: 0%;
                left: 100%;
                width: 100%;
                height: 100%;
                border-radius: 8px;
                opacity: 1;
                background-color: var(--background);
                z-index: -1;
                border: 2px solid var(--background);
                transform: scale(0);
                transform-origin: 0;
                transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
                display: grid;
                place-items: center;
            }

        .tooltip {
            position: absolute;
            top: calc(100% + 80px);
            height:60px;
            margin-left: 1px;
            bottom: calc(100% + 10px);
            left: 50%;
            transform: translateX(-50%);
            padding: 0.3em 0.6em;
            opacity: 0;
            pointer-events: none;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            background: var(--background);
            z-index: -1;
            border-radius: 8px;
            scale: 0;
            transform-origin: 0 0;
            text-transform: capitalize;
            font-weight: 400;
            font-size: 15px;
            box-shadow: rgba(0, 0, 0, 0.25) 0 8px 15px;
            width: 250px;
        }

            .tooltip::before {
                position: absolute;
                content: "";
                height: 0.6em;
                width: 0.6em;
                bottom: -0.2em;
                left: 50%;
                transform: translate(-50%) rotate(45deg);
                background: var(--background);
            }

        .tooltip-container:hover .tooltip {
            top: -100%;
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
            scale: 1;
            animation: shake 0.5s ease-in-out both;
        }

        .tooltip-container:hover {
            box-shadow: rgba(0, 0, 0, 0.25) 0 8px 15px;
            color: white;
            border-color: transparent;
        }

            .tooltip-container:hover span:last-child {
                transform: scale(1);
                left: 0;
            }

            .tooltip-container:hover .text {
                opacity: 0;
                top: 0%;
                left: 100%;
                transform: scale(0);
            }

        @keyframes shake {
            0% {
                rotate: 0;
            }

            25% {
                rotate: 7deg;
            }

            50% {
                rotate: -7deg;
            }

            75% {
                rotate: 1deg;
            }

            100% {
                rotate: 0;
            }
        }

    </style>
</head>

<body>
    <div>
        <script type="module">
            // å¯¼å…¥ä¸‰ç»´æ¨¡å‹åº“
            import * as THREE from "https://cdn.skypack.dev/three@0.136.0";
            // å¯¼å…¥è½¨é“æ§åˆ¶åº“
            import { OrbitControls } from "https://cdn.skypack.dev/three@0.136.0/examples/jsm/controls/OrbitControls";
            // æ¸…é™¤æ§åˆ¶å°
            console.clear()
            // åˆ›å»ºåœºæ™¯
            let scene = new THREE.Scene()
            // è®¾ç½®åœºæ™¯èƒŒæ™¯é¢œè‰²
            scene.background = new THREE.Color(0x160016)

            // åˆ›å»ºç›¸æœº
            let camera = new THREE.PerspectiveCamera(60, innerWidth / innerHeight, 1, 1000)
            // è®¾ç½®ç›¸æœºä½ç½®
            camera.position.set(0, 4, 21)

            // åˆ›å»ºæ¸²æŸ“å™¨
            let renderer = new THREE.WebGLRenderer()
            // è®¾ç½®æ¸²æŸ“å™¨å¤§å°
            renderer.setSize(innerWidth, innerHeight)
            // æŠŠæ¸²æŸ“å™¨åŠ å…¥åˆ°é¡µé¢ä¸­
            document.body.appendChild(renderer.domElement)
            // ç›‘å¬çª—å£å¤§å°å˜åŒ–äº‹ä»¶
            window.addEventListener("resize", event => {
                camera.aspect = innerWidth / innerHeight
                camera.updateProjectionMatrix()
                renderer.setSize(innerWidth, innerHeight)
            })

            // åˆ›å»ºæ§åˆ¶å™¨
            let controls = new OrbitControls(camera, renderer.domElement)
            // å¼€å¯é˜»å°¼æ•ˆæœ
            controls.enableDamping = true
            // ç¦ç”¨é¢æ¿
            controls.enablePan
            // åˆ›å»ºå…¨å±€uniform
            let gu = {
                time: { value: 0 }
            }
            // åˆ›å»ºç‚¹çš„å¤§å°æ•°ç»„å’Œç§»åŠ¨æ•°ç»„
            let sizes = []
            let shift = []

            // åˆ›å»ºç§»åŠ¨å‡½æ•°
            let pushShift = () => {
                shift.push(
                    Math.random() * Math.PI,
                    Math.random() * Math.PI * 2,
                    (Math.random() * 0.9 + 0.1) * Math.PI * 0.1,
                    Math.random() * 0.9 + 0.1
                )
            }

            // åˆ›å»ºç‚¹çš„é¡¶ç‚¹æ•°ç»„ï¼ˆä¸­é—´çš„çƒä½“ï¼‰
            // åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º5ä¸‡çš„æ•°ç»„ptså¹¶yç”¨Array.prototype.map()æ–¹æ³•éå†æ•°ç»„å¹¶å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œæ“ä½œ
            let pts = new Array(50000).fill().map(p => {
                // æ¯æ¬¡éå†ä¸­ï¼Œä¼šå‘sizesæ•°ç»„ä¸­æ·»åŠ ä¸€ä¸ªéšæœºå¤§å°
                sizes.push(Math.random() * 1.5 + 0.5)
                // è°ƒç”¨pushShift()å‡½æ•°æ·»åŠ ä½ç½®ä¿¡æ¯ï¼Œå¹¶è¿”å›ä¸€ä¸ªéšæœºæ–¹å‘çš„THREE.Vectorå¯¹è±¡
                pushShift()
                return new THREE.Vector3().randomDirection().multiplyScalar(Math.random() * 0.5 + 9.5)
                //
            })

            // æ·»åŠ æ›´å¤šçš„ç‚¹ï¼ˆæ—è¾¹å›´ç»•çš„ï¼‰
            // å…ˆå¾ªç¯ç”Ÿæˆåä¸‡ä¸ªç‚¹
            // æ¯æ¬¡å¾ªç¯ä¸­ç”Ÿæˆä¸€ä¸ªéšæœºæ•°randï¼Œå†ç”Ÿæˆä¸€ä¸ªéšæœºåŠå¾„radius

            for (let i = 0; i < 100000; i++) {
                let r = 10, R = 40;
                let rand = Math.pow(Math.random(), 1.5);
                let radius = Math.sqrt(R * R * rand + (1 - rand) * r * r);
                // ä½¿ç”¨new THREE.Vector3().setFromCylindricalCoords()ç”Ÿæˆä¸€ä¸ªç‚¹ã€‚
                pts.push(new THREE.Vector3().setFromCylindricalCoords(radius, Math.random() * 2 * Math.PI, (Math.random() - 0.5) * 2));
                sizes.push(Math.random() * 1.5 + 0.5);
                pushShift();
            }
            // ç”Ÿæˆä¸€ä¸ªç‚¹gï¼ŒåŒæ—¶å°†ç‚¹çš„å¤§å°å’Œä½ç½®ä¿¡æ¯æ·»åŠ åˆ°sizeså’Œshiftæ•°ç»„ä¸­
            let g = new THREE.BufferGeometry().setFromPoints(pts)
            // åˆ›å»ºäº†ä¸€ä¸ªç¼“å†²å‡ ä½•ä½“å¹¶è®¾ç½®sizeså’Œshiftå±æ€§
            // æ³¨æ„è¿™é‡Œçš„Fè¦å¤§å†™Float32BufferAttribute
            g.setAttribute("sizes", new THREE.Float32BufferAttribute(sizes, 1))
            g.setAttribute("shift", new THREE.Float32BufferAttribute(shift, 4))
            // åˆ›å»ºç‚¹æè´¨
            let m = new THREE.PointsMaterial({
                // è¡¨ç¤ºç‚¹çš„å¤§å°
                size: 0.08,
                // è®¾ç½®æè´¨ä¸ºé€æ˜
                transparent: true,
                // è¡¨ç¤ºç¦ç”¨æ·±åº¦æµ‹è¯•ï¼Œä½¿ç‚¹å¯ä»¥å åŠ 
                depthTest: false,
                // ä½¿ç”¨å‡å‘æ··åˆæ¨¡å¼
                blending: THREE.AdditiveBlending,
                // åœ¨æè´¨ç¼–è¯‘ä¹‹å‰ä¿®æ”¹é¢œè‰²å™¨ï¼Œåœ¨è¿™é‡Œï¼Œå®ƒç”¨æ¥æ›¿æ¢é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡å…ƒç€è‰²å™¨ï¼Œæ·»åŠ uniform
                // å’Œattributeï¼Œä»¥é¸¡è‡ªå®šä¹‰é¢œè‰²å’Œç§»åŠ¨
                onBeforeCompile: shader => {
                    shader.uniforms.time = gu.time
                    // é¦–å…ˆï¼Œå®ƒä¸ºç€è‰²å™¨è®¾ç½®äº†ä¸€ä¸ªuniformå˜é‡timeï¼Œè¯¥å˜é‡æ˜¯åœ¨ç‚¹æè´¨ä¸­å®šä¹‰çš„ï¼Œç”¨æ¥è¿½è¸ªæ—¶é—´
                    // ç„¶åå®ƒå®šä¹‰äº†ä¸¤ä¸ªattributeå˜é‡sizeså’Œshiftï¼Œè¿™ä¸¤ä¸ªå˜é‡æ˜¯åœ¨ç¼“å†²å‡ ä½•ä½“ä¸­å®šä¹‰çš„ï¼Œç”¨æ¥æ§åˆ¶ç‚¹çš„å¤§å°å’Œç§»åŠ¨
                    // æœ€åä½¿ç”¨replaceæ–¹æ³•æ¥æ›¿æ¢é¡¶ç‚¹ç€è‰²å™¨ä¸­çš„ä»£ç 
                    shader.vertexShader = `
                                                uniform float time;
                                                attribute float sizes;
                                                attribute vec4 shift;
                                                varying vec3 vColor;
                                                ${shader.vertexShader}
                                                `
                        // æ³¨æ„ä¸Šé¢çš„ ` ä¸è¦æ¼æ‰äº†
                        // ä½¿ç”¨replaceæ¥æ›¿æ¢ç€è‰²å™¨ä¸­çš„ä»£ç 
                        // æ›´æ–°ç‚¹çš„å¤§å°
                        .replace(
                            `gl_PointSize = size;`,
                            `gl_PointSize = size * sizes;`
                        )
                        // æ›´æ–°ç‚¹çš„é¢œè‰²
                        .replace(
                            `#include <color_vertex>`,
                            `#include <color_vertex>
                                                    float d = length(abs(position)/vec3(40.,10.,40));
                                                    d=clamp(d,0.,1.);
                                                    vColor = mix(vec3(227.,155.,0.),vec3(100.,50.,255.),d)/255.;`
                        )
                        // è®°å¾—åŠ ä¸Šåˆ†å·
                        // æ›´æ–°ç‚¹çš„ç§»åŠ¨
                        .replace(
                            `#include <begin_vertex>`,
                            `#include <begin_vertex>
                                                            float t = time;
                                                            float moveT = mod(shift.x + shift.z * t,PI2);
                                                            float moveS = mod(shift.y + shift.z * t,PI2);
                                                            transformed += vec3(cos(moveS) * sin(moveT),cos(moveT),sin(moveS)*sin(moveT)) * shift.w;
                                                            `
                        )
                    // ä¿®æ”¹ç‰‡å…ƒç€è‰²å™¨ï¼Œç”¨æ¥è®©ç‚¹çš„è¾¹ç¼˜æ›´åŠ åœ†æ»‘

                    // é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ªvaryingå˜é‡vColorï¼Œè¿™ä¸ªå˜é‡æ˜¯åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­å®šä¹‰çš„ï¼Œç”¨æ¥ä¼ é€’ç‚¹çš„é¢œè‰²åˆ°ç‰‡æ®µç€è‰²å™¨
                    // ç„¶åä½¿ç”¨replaceæ–¹æ³•æ¥æ›¿æ¢ç‰‡æ®µç€è‰²å™¨çš„ä»£ç 
                    shader.fragmentShader = `
                                                    varying vec3 vColor;
                                                    ${shader.fragmentShader}
                                                `.replace(
                        `#include <clipping_planes_fragment>`,
                        `#include <clipping_planes_fragment>
                                                        float d = length(gl_PointCoord.xy - 0.5);
                                                    `
                    ).replace(
                        // è®°å¾—åŠ ä¸Šç©ºæ ¼
                        `vec4 diffuseColor = vec4( diffuse, opacity );`,
                        `vec4 diffuseColor = vec4( vColor, smoothstep(0.5, 0.1, d)/* * 0.5+0.5*/);`
                    );
                }

            })
            // -------------------------------------------------------------
            // åˆ›å»ºç‚¹äº‘å¹¶å°†å…¶æ·»åŠ åˆ°åœºæ™¯ä¸­ï¼Œå¹¶è®¾ç½®æ¸²æŸ“å¾ªç¯
            let p = new THREE.Points(g, m)
            // æ—‹è½¬é¡ºåºä¸º"ZYX"
            p.rotation.order = "ZYX"
            // æ—‹è½¬è§’åº¦ 0.2
            p.rotation.z = 0.2
            // æŠŠå¯¹è±¡ï¼ˆpï¼‰æ·»åŠ åˆ°åœºæ™¯ï¼ˆsceneï¼‰ä¸­
            scene.add(p)
            // åˆ›å»ºä¸€ä¸ªæ—¶é’Ÿå¯¹è±¡clock
            let clock = new THREE.Clock()
            // æ¸²æŸ“å¾ªç¯ï¼Œæ¯æ¬¡å¾ªç¯ä¸­ä¼šæ›´æ–°æ§åˆ¶å™¨ï¼Œæ›´æ–°pçš„æ—‹è½¬è§’åº¦ï¼Œæ›´æ–°æ—¶é—´
            renderer.setAnimationLoop(() => {
                // æ›´æ–°æ§åˆ¶å™¨
                controls.update()
                // è·å–æ—¶é’Ÿå¯¹è±¡ï¼ˆclockï¼‰çš„å·²ç»æµé€çš„æ—¶é—´ï¼ˆtï¼‰å¹¶å°†ä»–ä¹˜0.5
                // å…ˆæŠŠæ—¶é’Ÿå…³äº†
                let t = clock.getElapsedTime() * 0.5
                // å°†gu.time.value è®¾ç½®ä¸ºt*Math.PI
                gu.time.value = t * Math.PI
                // å°†å¯¹è±¡ï¼ˆpï¼‰çš„æ—‹è½¬è§’åº¦yè®¾ç½®ä¸ºt*0.05
                p.rotation.y = t * 0.05
                // æ¸²æŸ“åœºæ™¯ï¼ˆsceneï¼‰å’Œç›¸æœºï¼ˆcameraï¼‰
                renderer.render(scene, camera)
            })</script>
    </div>
    <div class="content">
        <h1>Welcome to My Eyesight Test</h1>
        <button class="btn" id="myButton">
            Click to Start
        </button>
        <button class="btn" id="myButton2">
            Click to Start2
        </button>

        <!-- å¯ä»¥ç»§ç»­æ·»åŠ å…¶ä»–å†…å®¹ -->
    </div>
    <div class="tooltip-container">
        <span class="tooltip">When you click to start,the website will open your camera and take your video</span>
        <span class="text">Help HereğŸ‘‹</span>
        <span>Tooltip ğŸ‘†</span>
    </div>

    <script>
    // è·å–æŒ‰é’®å…ƒç´ 
    var button = document.getElementById("myButton");

    // æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨
    button.addEventListener("click", function () {
        // åœ¨è¿™é‡Œæ‰§è¡Œè·³è½¬é€»è¾‘
        window.location.href = "index"; } )
    var button2 = document.getElementById("myButton2");

    // æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨
    button2.addEventListener("click", function () {
        // åœ¨è¿™é‡Œæ‰§è¡Œè·³è½¬é€»è¾‘
        window.location.href = "test2"; } )

    </script>

</body>

</html>